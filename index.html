<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>JIGI v0.4.1</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --primary:#1976D2;        /* í¬ì¸íŠ¸ ë¸”ë£¨ */
      --text:#424242;           /* ê¸°ë³¸ í…ìŠ¤íŠ¸ */
      --muted:#B0BEC5;          /* íšŒìƒ‰(ì–´ì œ ë¼ì¸/ë¹„í™œì„± ì¹©) */
      --bg:#FFFFFF;             /* ë°°ê²½ */
      --chip:#F2F6FA;           /* ì¹© ë°°ê²½ */
      --ad:#E0E0E0;             /* ë°°ë„ˆ ìë¦¬ */
      --yellow:#FFD95A;         /* ë§‘ìŒ */
      --mint:#66D9E8;           /* ìƒì¾Œ */
      --orange:#FF7043;         /* ë”ì›€ */
      --rain:#4A90E2;           /* ë¹„ */
    }
    *{box-sizing:border-box}
    body{
      margin:0; background:var(--bg); color:var(--text);
      font-family:Pretendard, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, "Apple SD Gothic Neo", "Noto Sans KR", sans-serif;
      display:flex; flex-direction:column; align-items:center; min-height:100svh;
    }
    header{ width:100%; padding:16px 20px; text-align:center}
    h1{ margin:0; font-size:24px; color:var(--primary); letter-spacing:0.5px }
    .headline{ font-size:16px; margin-top:8px }
    .chips{ display:flex; gap:8px; margin:12px 0; padding:0 16px; flex-wrap:wrap; justify-content:center }
    .chip{ padding:6px 12px; border-radius:16px; background:var(--chip); color:var(--text); font-size:14px }
    .chip.active{ background:var(--primary); color:#fff }
    .wrap{ width:100%; max-width:720px; display:flex; flex-direction:column; align-items:center }
    #chart-wrap{ width:92%; height:220px; margin:8px 0 6px }
    canvas{ width:100% !important; height:100% !important; }
    .cards{ display:flex; gap:8px; width:92%; margin:8px 0 }
    .card{ flex:1; padding:8px; border-radius:10px; background:#F7F9FC; text-align:center; font-size:13px }
    .placeholder{ width:92%; margin:8px 0; padding:10px; border-radius:10px; background:#F3F3F3; text-align:center; font-size:13px; color:#666; display:none } /* ì „ê´‘íŒ ì„ì‹œ ë¹„í™œì„± */
    .ad{ width:100%; height:100px; background:var(--ad); margin-top:auto; display:flex; align-items:center; justify-content:center; color:#555; font-size:14px }
    /* OOTD ë¯¸ë¦¬ë³´ê¸° ë²„íŠ¼ (ì¶”í›„ ì¹´ë©”ë¼ ì˜¤ë²„ë ˆì´ìš©) */
    .toolbar{ width:92%; display:flex; justify-content:flex-end; gap:8px; margin:6px 0 4px }
    .btn{ padding:8px 10px; border:none; border-radius:10px; background:#EEF4FF; color:var(--primary); font-weight:600; font-size:12px }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
  <header>
    <h1>JIGI</h1>
    <div class="headline" id="headline">ì˜¤ëŠ˜ì€ ì–´ì œë³´ë‹¤ ì¡°ê¸ˆ ë” í¬ê·¼í•´ìš” â˜€</div>
  </header>

  <div class="wrap">
    <div class="chips" id="chips"></div>

    <div id="chart-wrap">
      <canvas id="weatherChart"></canvas>
    </div>

    <div class="cards">
      <div class="card" id="rainCard">ê°•ìˆ˜: 20%</div>
      <div class="card" id="windCard">ë°”ëŒ: 3 m/s</div>
      <div class="card" id="uvCard">UV: ë³´í†µ</div>
    </div>

    <div class="toolbar">
      <button class="btn" id="btn-ootd" title="(ë¯¸ë¦¬ë³´ê¸°) ì¹´ë©”ë¼ ì˜¤ë²„ë ˆì´">OOTD í”„ë ˆì„ ë¯¸ë¦¬ë³´ê¸°</button>
    </div>

    <!-- ì „ê´‘íŒ placeholderëŠ” í˜„ì¬ ë¯¸ë…¸ì¶œ (display:none) -->
    <div class="placeholder">íŠ¹íŒŒì› ë©˜íŠ¸ ê³µê°„ (í›„ì† ì—…ë°ì´íŠ¸ì—ì„œ í™œì„±í™”)</div>
  </div>

  <div class="ad">Ad banner (320Ã—100)</div>

<script>
// ---------- ë”ë¯¸ ë°ì´í„° ìƒì„± ----------
const hours = Array.from({length:25}, (_,i)=>i);
const yesterdayTemps = hours.map(h => 16 + Math.sin(h/24 * 2*Math.PI)*3);
const todayTemps     = hours.map(h => 18 + Math.sin(h/24 * 2*Math.PI)*4);
const nowHour = new Date().getHours();

// ---------- TipChips (ì˜ˆì‹œ) ----------
const chipsData = [
  { text:"ğŸŒ§ ë ˆì¸ê¸°ì–´", active:false },
  { text:"ğŸ§¥ ë ˆì´ì–´ë“œ", active:true },
  { text:"ğŸ§´ ì„ í¬ë¦¼", active:false }
];
const chipsEl = document.getElementById('chips');
chipsData.forEach(c=>{
  const d=document.createElement('div');
  d.className='chip'+(c.active?' active':'');
  d.textContent=c.text;
  chipsEl.appendChild(d);
});

// ---------- Chart.js: ê°€ìš´ë° ì •ë ¬ + í˜„ì¬ì‹œê°„ ë¼ì¸ í”ŒëŸ¬ê·¸ì¸ ----------
const ctx = document.getElementById('weatherChart');
const nowLinePlugin = {
  id: 'nowLine',
  afterDatasetsDraw(chart, args, pluginOptions) {
    const {ctx, chartArea:{top,bottom}, scales:{x}} = chart;
    const xPos = x.getPixelForValue(nowHour);
    ctx.save();
    ctx.lineWidth = 1.5;
    ctx.strokeStyle = 'red';
    ctx.setLineDash([4,4]);
    ctx.beginPath();
    ctx.moveTo(xPos, top);
    ctx.lineTo(xPos, bottom);
    ctx.stroke();
    ctx.restore();
  }
};

const chart = new Chart(ctx, {
  type:'line',
  data:{
    labels: hours,
    datasets:[
      { label:'ì–´ì œ', data:yesterdayTemps, tension:0.3, borderColor:'#B0BEC5', pointRadius:0 },
      { label:'ì˜¤ëŠ˜', data:todayTemps, tension:0.3, borderColor:getComputedStyle(document.documentElement).getPropertyValue('--primary').trim(), pointRadius:0 }
    ]
  },
  options:{
    responsive:true,
    maintainAspectRatio:false,
    plugins:{ legend:{ display:false } },
    layout:{ padding:{ left:8, right:8, top:4, bottom:0 } },
    scales:{
      x:{ grid:{ display:false }, ticks:{ maxTicksLimit:9 } },
      y:{ grid:{ color:'#ECEFF1' }, ticks:{ callback:(v)=>v+'Â°' } }
    },
    animation:false
  },
  plugins:[nowLinePlugin]
});

// ---------- í—¤ë“œë¼ì¸ ì˜ˆì‹œ (ë°ì´í„° ë§¤í•‘ ìë¦¬) ----------
const headline = document.getElementById('headline');
const deltaAvg = (todayTemps.reduce((a,b)=>a+b,0)/todayTemps.length) - (yesterdayTemps.reduce((a,b)=>a+b,0)/yesterdayTemps.length);
headline.textContent = deltaAvg>1.5 ? "ì˜¤ëŠ˜ì€ ì–´ì œë³´ë‹¤ ì¡°ê¸ˆ ë” í¬ê·¼í•´ìš” â˜€" :
                       deltaAvg<-1.5 ? "ì˜¤ëŠ˜ì€ ì–´ì œë³´ë‹¤ ì„ ì„ í•´ìš” ğŸƒ" :
                                       "ì˜¤ëŠ˜ì€ ì–´ì œì™€ ë¹„ìŠ·í•˜ê²Œ ëŠê»´ì ¸ìš” ğŸ™‚";

// ---------- OOTD í”„ë ˆì„ ë¯¸ë¦¬ë³´ê¸°(ì¹´ë©”ë¼ ì˜¤ë²„ë ˆì´ ì¤€ë¹„) ----------
document.getElementById('btn-ootd').addEventListener('click', async ()=>{
  alert("ì¹´ë©”ë¼ ì˜¤ë²„ë ˆì´ëŠ” ë‹¤ìŒ ë‹¨ê³„ì—ì„œ í™œì„±í™”ë©ë‹ˆë‹¤.\n(iOS/ì•ˆë“œë¡œì´ë“œëŠ” https í™˜ê²½ + ì‚¬ìš©ì í—ˆìš© í•„ìš”)");
});
</script>
</body>
</html>
